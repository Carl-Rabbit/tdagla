!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.tdagla=e():t.tdagla=e()}(self,(()=>(()=>{"use strict";var t={d:(e,a)=>{for(var s in a)t.o(a,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:a[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{tdagla:()=>E});class a{id;data;src;dst;constructor(t,e,s=null){this.id=a.getEdgeId(t,e),this.src=t,this.dst=e,this.data=s}static getEdgeId(t,e){return t.id+"-"+e.id}}function s(t,e){let a=t.indexOf(e);return-1!==a&&(t.splice(a,1),!0)}const d=function(t,e){let a=t[0];return t.forEach((t=>{e(t,a)>0&&(a=t)})),a};class n{id;data;outEdges=[];inEdges=[];constructor(t,e=null){this.id=t,this.data=e}}class i{nodes=[];nodeMap=new Map;edges=[];edgeMap=new Map;addNode(t,e=null){let a=new n(t,e);return this.nodes.push(a),this.nodeMap.set(t,a),a}removeNode(t){this.nodeMap.has(t.id)&&(s(this.nodes,t),this.nodeMap.delete(t.id),t.inEdges.concat(t.outEdges).forEach((t=>this.removeEdge(t))))}removeNodeById(t){let e=this.nodeMap.get(t);e&&this.removeNode(e)}addEdge(t,e,s=null){let d=this.nodeMap.get(t),n=this.nodeMap.get(e);if(void 0===d||void 0===n)return null;let i=new a(d,n,s);return d.outEdges.push(i),n.inEdges.push(i),this.edges.push(i),this.edgeMap.set(i.id,i),i}removeEdge(t){this.edgeMap.has(t.id)&&(s(this.edges,t),this.edgeMap.delete(t.id),s(t.src.outEdges,t),s(t.dst.inEdges,t))}removeEdgeById(t){let e=this.edgeMap.get(t);e&&this.removeEdge(e)}copy(){let t=new i;return this.nodes.forEach((e=>t.addNode(e.id,e.data))),this.edges.forEach((e=>t.addEdge(e.src.id,e.dst.id))),t}}class r{x0;x1;y;vertexName;toRender;constructor(t,e,a,s,d){this.x0=t,this.x1=e,this.y=a,this.vertexName=d,this.toRender=s}}class o{isHidden=!1;turningX=null}const h=function(t,e,a){if(t.has(e))return t.get(e);const s=a(e);return t.set(e,s),s};class g{rootId;graph;gap;visitedSet;constructor(t,e,a){this.rootId=t,this.graph=e,this.gap=a}solve(){this.computeHiddenEdgeSet(),this.reorderInAndOutEdges(),this.setLines()}computeHiddenEdgeSet(){const t=this.graph.nodes.filter((t=>t.outEdges.length>1));this.graph.edges.forEach((t=>t.data.isHidden=!1)),t.forEach((t=>{const e=t.outEdges.map((t=>t.dst));let a=null;e.every((t=>!t.data.toRender))?a=e[0]:e.forEach((t=>{t.data.toRender&&(null===a||a.data.x0>t.data.x0)&&(a=t)})),t.outEdges.forEach((t=>{t.dst!==a&&(t.data.isHidden=!0)}))}))}reorderInAndOutEdges(){const t=new Map;this.visitedSet=new Set;const e=a=>{if(this.visitedSet.has(a.id))return 1/0;this.visitedSet.add(a.id);let s=a.data.x0??1/0;return a.inEdges.filter((t=>!t.data.isHidden)).forEach((t=>{const a=e(t.src);s=Math.min(s,a)})),t.set(a.id,s),s};e(this.graph.nodeMap.get(this.rootId)),this.graph.nodes.forEach((e=>{e.inEdges.sort(((e,a)=>t.get(e.src.id)-t.get(a.src.id))),e.outEdges.sort(((e,a)=>t.get(e.src.id)-t.get(a.src.id)))}))}setLines(){this.visitedSet=new Set;const{lineMap:t}=this.layoutVertex(this.graph.nodeMap.get(this.rootId));for(const e of t.keys()){const a=t.get(e);this.graph.nodeMap.get(e).data.y=a}}layoutVertex(t){const e=new Map,s=new Map,n=t.inEdges.filter((t=>!t.data.isHidden)).map((t=>t.src));if(0===n.length)return t.data.toRender&&(e.set(t.id,0),h(s,0,(()=>[])).push(t)),{lineMap:e,blocksMap:s};let i=null,r=null,o=0;for(let t=0;t<n.length;++t){const a=n[t];if(this.visitedSet.has(a.id))continue;this.visitedSet.add(a.id);const{lineMap:d,blocksMap:g}=this.layoutVertex(a);if(0===d.size)continue;const l=Math.min(...d.values()),c=Math.max(...d.values());let u=o;if(null!==i){const t=e.get(i.id),n=d.get(a.id);let r=u,h=u;t:for(;;){--h;const e=t=>t-l+h,a=t=>t+l-h;if(e(n)<=t)break;for(let t=e(l);t<o;t++){const e=s.get(t)??[],d=g.get(a(t))??[];for(const t of e)for(const e of d){if(this.isOverlappedConsiderTurningX(t,e))break t;if(i===t&&e.data.turningX<t.data.x0)break t}}r=h}u=r}const p=t=>t-l+u;for(const[t,a]of d.entries()){const s=p(a);e.set(t,s)}for(const[t,e]of g.entries()){const a=p(t);h(s,a,(()=>[])).push(...e)}o=p(c)+1,i=a,r={lineMap:d,blocksMap:g}}if(t.data.toRender){const i=Math.max(...e.values());let r=1/0,o=-2,g=null;for(let a=-1;a<=i+1;++a){if(!(s.get(a)??[]).every((e=>!this.isOverlapped(e,t))))continue;const d=this.computeChildrenGroups(e,t,n,a);let i=0;d.forEach(((s,d)=>{if(0===s.length)return;const n=Math.max(...s.map((t=>t.data.x1)));s.forEach((t=>{i+=this.computeEdgeCost(t.data.x1,e.get(t.id),n+this.gap,a)})),1===d&&(i+=this.computeEdgeCost(n,a,t.data.x0,a))}));const h=n.reduce(((t,a)=>t+e.get(a.id)),0)/n.length;i+=Math.abs(h-a)*n.length*p,0!==d[0].length&&Math.min(...d[0].map((t=>t.data.x0)))>t.data.x0&&(i+=1/0),i<r&&(r=i,o=a,g=d)}if(-2===o&&console.error("layout error",this,t),-1===o){o=0;for(const[t,a]of e.entries())e.set(t,a+1);const t=new Map;s.forEach(((e,a)=>t.set(a,e))),s.clear(),t.forEach(((t,e)=>{s.set(e+1,t)}))}e.set(t.id,o),h(s,o,(()=>[])).push(t),g.forEach(((n,i)=>{let r;const h=Math.max(...n.map((t=>t.data.x1)));r=Math.min(h+this.gap/2,t.data.x1),n.forEach((n=>{const g=this.graph.edgeMap.get(a.getEdgeId(n,t));if(!g.data.isHidden)if(o===e.get(n.id))g.data.turningX=t.data.x0;else if(1===i){const a=[],i=e.get(n.id);for(let e=Math.min(i,o);e<=Math.max(i,o);++e){const n=s.get(e).filter((e=>e.data.x0<t.data.x0)),i=d(n,((t,e)=>t.data.x0-e.data.x0));i&&a.push(i)}let r=h;if(a.length>0){const e=a.map((e=>{const a=e.outEdges.find((t=>!t.data.isHidden));return a.data.turningX&&a.dst!==t?a.data.turningX:e.data.x1}));r=Math.max(...e)+this.gap/2}g.data.turningX=(r+t.data.x0)/2}else g.data.turningX=r}))}))}else{let d=null;for(const t of e.keys()){const e=this.graph.nodeMap.get(t);(null===d||e.data.x1>d.data.x1)&&(d=e)}if(null!==d){t.data.x0=t.data.x1=d.data.x1;const i=e.get(d.id);e.set(t.id,i),h(s,i,(()=>[])).push(t),n.forEach((e=>{this.graph.edgeMap.get(a.getEdgeId(e,t)).data.turningX=t.data.x0}))}}return{lineMap:e,blocksMap:s}}isOverlapped(t,e){const a=t.data.x0,s=t.data.x1+this.gap,d=e.data.x0,n=e.data.x1+this.gap;return!(s<d||a>n)}isOverlappedConsiderTurningX(t,e){let a=t.data.x0,s=t.data.x1+this.gap,d=e.data.x0,n=e.data.x1+this.gap;return t.outEdges.forEach((t=>{t.data.turningX&&s<t.data.turningX&&(s=t.data.turningX)})),e.outEdges.forEach((t=>{t.data.turningX&&n<t.data.turningX&&(n=t.data.turningX)})),!(s<d||a>n)}computeChildrenGroups(t,e,a,s){const d=a.filter((t=>this.isOverlapped(e,t))),n=d.filter((e=>t.get(e.id)<s)),i=n[n.length-1]??null,r=d.filter((e=>t.get(e.id)>s))[0]??null;let o=0,h=a.length;return null!==i&&(o=a.indexOf(i)+1),null!==r&&(h=a.indexOf(r)),[a.filter(((t,e)=>e<o)),a.filter(((t,e)=>o<=e&&e<h)),a.filter(((t,e)=>h<=e))]}computeEdgeCost(t,e,a,s){let d=0;return d+=Math.abs(t-a)/this.gap*l,d+=Math.abs(e-s)*(c+u*(e<=s?0:1)),d}}const l=1,c=1,u=.05,p=.04;class f{_graph;_gap=20;_lineHeight=10;_lineSpace=4;constructor(){this._graph=new i}setNode({id:t,x0:e,x1:a,render:s=!1}){const d=new r(e,a,0,s,"node-"+t);return this._graph.addNode(t,d),this}setEdge({src:t,dst:e}){if(!this._graph.nodeMap.has(t))return console.error("tdagla: Can't find node "+t+". Ignored."),this;if(!this._graph.nodeMap.has(e))return console.error("tdagla: Can't find node "+e+". Ignored."),this;const a=new o;return this._graph.addEdge(t,e,a),this}getNode(t){const e=this._graph.nodeMap.get(t);return e?Object.assign({},e.data):null}getEdge(t,e){const s=this._graph.nodeMap.get(t),d=this._graph.nodeMap.get(e);if(!s||!d)return null;const n=this._graph.edgeMap.get(a.getEdgeId(s,d));return n?Object.assign({},n.data):null}setGap(t){return this._gap=t,this}getGap(){return this._gap}setLineHeight(t){return this._lineHeight=t,this}getLineHeight(){return this._lineHeight}setLineSpace(t){return this._lineSpace=t,this}getLineSpace(){return this._lineSpace}layout(){if(0===this._graph.nodes.length)return;let t=this._graph.nodes[0];for(;0!==t.outEdges.length;)t=t.outEdges[0].dst;new g(t.id,this._graph,this._gap).solve()}}const E={create:function(){return new f}};return e})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YWNrOi8vdGRhZ2xhL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly90ZGFnbGEvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdGRhZ2xhL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90ZGFnbGEvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90ZGFnbGEvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly90ZGFnbGEvLi9zcmMvZ3JhcGgvRWRnZS5qcyIsIndlYnBhY2s6Ly90ZGFnbGEvLi9zcmMvdXRpbHMvQXJyYXlVdGlscy5qcyIsIndlYnBhY2s6Ly90ZGFnbGEvLi9zcmMvZ3JhcGgvTm9kZS5qcyIsIndlYnBhY2s6Ly90ZGFnbGEvLi9zcmMvZ3JhcGgvR3JhcGguanMiLCJ3ZWJwYWNrOi8vdGRhZ2xhLy4vc3JjL2FsZ28vVmVydGV4TGF5b3V0RGF0YS5qcyIsIndlYnBhY2s6Ly90ZGFnbGEvLi9zcmMvYWxnby9FZGdlTGF5b3V0RGF0YS5qcyIsIndlYnBhY2s6Ly90ZGFnbGEvLi9zcmMvdXRpbHMvTWFwVXRpbHMuanMiLCJ3ZWJwYWNrOi8vdGRhZ2xhLy4vc3JjL2FsZ28vVERBR0xheW91dEFsZ28uanMiLCJ3ZWJwYWNrOi8vdGRhZ2xhLy4vc3JjL2FsZ28vVGRhZy5qcyIsIndlYnBhY2s6Ly90ZGFnbGEvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1widGRhZ2xhXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcInRkYWdsYVwiXSA9IGZhY3RvcnkoKTtcbn0pKHNlbGYsICgpID0+IHtcbnJldHVybiAiLCIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8qKlxyXG4gKiBAdGVtcGxhdGUgVCwgVVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEVkZ2Uge1xyXG4gICAgLyoqIEB0eXBlIHtzdHJpbmd9ICovXHJcbiAgICBpZFxyXG4gICAgLyoqIEB0eXBlIHtVfSAqL1xyXG4gICAgZGF0YVxyXG4gICAgLyoqIEB0eXBlIHtOb2RlPFQsIFU+fSAqL1xyXG4gICAgc3JjXHJcbiAgICAvKiogQHR5cGUge05vZGU8VCwgVT59ICovXHJcbiAgICBkc3RcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7Tm9kZTxULCBVPn0gc3JjXHJcbiAgICAgKiBAcGFyYW0ge05vZGU8VCwgVT59IGRzdFxyXG4gICAgICogQHBhcmFtIHtVfSBkYXRhXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHNyYywgZHN0LCBkYXRhID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuaWQgPSBFZGdlLmdldEVkZ2VJZChzcmMsIGRzdClcclxuICAgICAgICB0aGlzLnNyYyA9IHNyY1xyXG4gICAgICAgIHRoaXMuZHN0ID0gZHN0XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtOb2RlPFQsIFU+fSBzcmNcclxuICAgICAqIEBwYXJhbSB7Tm9kZTxULCBVPn0gZHN0XHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0RWRnZUlkKHNyYywgZHN0KSB7XHJcbiAgICAgICAgcmV0dXJuIHNyYy5pZCArICctJyArIGRzdC5pZFxyXG4gICAgfVxyXG59XHJcbiIsIi8qKlxyXG4gKiBAdGVtcGxhdGUgVFxyXG4gKlxyXG4gKiBAcGFyYW0ge1RbXX0gYXJyYXlcclxuICogQHBhcmFtIHtmdW5jdGlvbihULFQpOm51bWJlcn0gY29tcGFyYXRvclxyXG4gKiBAcmV0dXJucyB7VH1cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBmaW5kTWF4KGFycmF5LCBjb21wYXJhdG9yKSB7XHJcbiAgICBsZXQgbWF4SXRlbSA9IGFycmF5WzBdO1xyXG4gICAgYXJyYXkuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICBpZiAoY29tcGFyYXRvcihpdGVtLCBtYXhJdGVtKSA+IDApIHtcclxuICAgICAgICAgICAgbWF4SXRlbSA9IGl0ZW07XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgIHJldHVybiBtYXhJdGVtO1xyXG59XHJcblxyXG4vKipcclxuICogQHRlbXBsYXRlIFRcclxuICpcclxuICogQHBhcmFtIHtUW119IGFycmF5XHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oVCwgaSk6Ym9vbGVhbn0gcHJlZGljYXRlXHJcbiAqIEByZXR1cm5zIHtUfVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGZpbmQoYXJyYXksIHByZWRpY2F0ZSkge1xyXG4gICAgbGV0IHJlc3VsdCA9IG51bGw7XHJcbiAgICBhcnJheS5mb3JFYWNoKChpdGVtLCBpKSA9PiB7XHJcbiAgICAgICAgaWYgKHByZWRpY2F0ZShpdGVtLCBpKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBpdGVtO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vKipcclxuICogQHRlbXBsYXRlIFRcclxuICpcclxuICogQHBhcmFtIHtUW119IGFycmF5XHJcbiAqIEBwYXJhbSB7VH0gaXRlbVxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVJdGVtRnJvbShhcnJheSwgaXRlbSkge1xyXG4gICAgbGV0IGluZGV4ID0gYXJyYXkuaW5kZXhPZihpdGVtKVxyXG4gICAgaWYgKGluZGV4ID09PSAtMSkgcmV0dXJuIGZhbHNlXHJcbiAgICBhcnJheS5zcGxpY2UoaW5kZXgsIDEpXHJcbiAgICByZXR1cm4gdHJ1ZVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgQXJyYXlVdGlscyA9IHtcclxuICAgIGZpbmRNYXgsXHJcbiAgICBmaW5kLFxyXG4gICAgcmVtb3ZlSXRlbUZyb20sXHJcbn1cclxuIiwiLyoqXHJcbiAqIEB0ZW1wbGF0ZSBULCBVXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTm9kZSB7XHJcbiAgICAvKiogQHR5cGUgeyhudW1iZXJ8c3RyaW5nKX0gKi9cclxuICAgIGlkXHJcbiAgICAvKiogQHR5cGUge1R9ICovXHJcbiAgICBkYXRhXHJcbiAgICAvKiogQHR5cGUge0VkZ2U8VCwgVT5bXX0gKi9cclxuICAgIG91dEVkZ2VzID0gW11cclxuICAgIC8qKiBAdHlwZSB7RWRnZTxULCBVPltdfSAqL1xyXG4gICAgaW5FZGdlcyA9IFtdXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0geyhudW1iZXJ8c3RyaW5nKX0gaWRcclxuICAgICAqIEBwYXJhbSB7VH0gZGF0YVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihpZCwgZGF0YSA9IG51bGwpIHtcclxuICAgICAgICB0aGlzLmlkID0gaWRcclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhXHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtyZW1vdmVJdGVtRnJvbX0gZnJvbSBcIkAvdXRpbHMvQXJyYXlVdGlsc1wiXHJcbmltcG9ydCB7RWRnZX0gZnJvbSBcIi4vRWRnZVwiXHJcbmltcG9ydCB7Tm9kZX0gZnJvbSBcIi4vTm9kZVwiXHJcblxyXG4vKipcclxuICogQHRlbXBsYXRlIFQsIFVcclxuICovXHJcbmV4cG9ydCBjbGFzcyBHcmFwaCB7XHJcbiAgICAvKiogQHR5cGUge05vZGU8VCwgVT5bXX0gKi9cclxuICAgIG5vZGVzID0gW11cclxuICAgIC8qKiBAdHlwZSB7TWFwPChudW1iZXJ8c3RyaW5nKSwgTm9kZTxULCBVPj59ICovXHJcbiAgICBub2RlTWFwID0gbmV3IE1hcCgpXHJcbiAgICAvKiogQHR5cGUge0VkZ2U8VCwgVT5bXX0gKi9cclxuICAgIGVkZ2VzID0gW11cclxuICAgIC8qKiBAdHlwZSB7TWFwPHN0cmluZywgRWRnZTxULCBVPj59ICovXHJcbiAgICBlZGdlTWFwID0gbmV3IE1hcCgpXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0geyhudW1iZXJ8c3RyaW5nKX0gaWRcclxuICAgICAqIEBwYXJhbSB7VH0gW2RhdGE9bnVsbF1cclxuICAgICAqIEByZXR1cm5zIHtOb2RlPFQsIFU+fVxyXG4gICAgICovXHJcbiAgICBhZGROb2RlKGlkLCBkYXRhID0gbnVsbCkge1xyXG4gICAgICAgIGxldCBub2RlID0gbmV3IE5vZGUoaWQsIGRhdGEpXHJcbiAgICAgICAgdGhpcy5ub2Rlcy5wdXNoKG5vZGUpXHJcbiAgICAgICAgdGhpcy5ub2RlTWFwLnNldChpZCwgbm9kZSlcclxuICAgICAgICByZXR1cm4gbm9kZVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtOb2RlPFQsIFU+fSBub2RlXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZU5vZGUobm9kZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5ub2RlTWFwLmhhcyhub2RlLmlkKSkge1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgcmVtb3ZlSXRlbUZyb20odGhpcy5ub2Rlcywgbm9kZSlcclxuICAgICAgICB0aGlzLm5vZGVNYXAuZGVsZXRlKG5vZGUuaWQpXHJcbiAgICAgICAgbm9kZS5pbkVkZ2VzLmNvbmNhdChub2RlLm91dEVkZ2VzKVxyXG4gICAgICAgICAgICAuZm9yRWFjaChlID0+IHRoaXMucmVtb3ZlRWRnZShlKSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7KG51bWJlcnxzdHJpbmcpfSBpZFxyXG4gICAgICovXHJcbiAgICByZW1vdmVOb2RlQnlJZChpZCkge1xyXG4gICAgICAgIGxldCBub2RlID0gdGhpcy5ub2RlTWFwLmdldChpZClcclxuICAgICAgICBpZiAoIW5vZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVtb3ZlTm9kZShub2RlKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHsobnVtYmVyfHN0cmluZyl9IHNyY0lkXHJcbiAgICAgKiBAcGFyYW0geyhudW1iZXJ8c3RyaW5nKX0gZHN0SWRcclxuICAgICAqIEBwYXJhbSB7VX0gW2RhdGE9bnVsbF1cclxuICAgICAqIEByZXR1cm5zIHtFZGdlPFQsIFU+fVxyXG4gICAgICovXHJcbiAgICBhZGRFZGdlKHNyY0lkLCBkc3RJZCwgZGF0YSA9IG51bGwpIHtcclxuICAgICAgICBsZXQgc3JjID0gdGhpcy5ub2RlTWFwLmdldChzcmNJZClcclxuICAgICAgICBsZXQgZHN0ID0gdGhpcy5ub2RlTWFwLmdldChkc3RJZClcclxuICAgICAgICBpZiAoc3JjID09PSB1bmRlZmluZWQgfHwgZHN0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBlZGdlID0gbmV3IEVkZ2Uoc3JjLCBkc3QsIGRhdGEpXHJcblxyXG4gICAgICAgIHNyYy5vdXRFZGdlcy5wdXNoKGVkZ2UpXHJcbiAgICAgICAgZHN0LmluRWRnZXMucHVzaChlZGdlKVxyXG4gICAgICAgIHRoaXMuZWRnZXMucHVzaChlZGdlKVxyXG4gICAgICAgIHRoaXMuZWRnZU1hcC5zZXQoZWRnZS5pZCwgZWRnZSlcclxuICAgICAgICByZXR1cm4gZWRnZVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtFZGdlPFQsIFU+fSBlZGdlXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZUVkZ2UoZWRnZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5lZGdlTWFwLmhhcyhlZGdlLmlkKSkge1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgcmVtb3ZlSXRlbUZyb20odGhpcy5lZGdlcywgZWRnZSlcclxuICAgICAgICB0aGlzLmVkZ2VNYXAuZGVsZXRlKGVkZ2UuaWQpXHJcbiAgICAgICAgcmVtb3ZlSXRlbUZyb20oZWRnZS5zcmMub3V0RWRnZXMsIGVkZ2UpXHJcbiAgICAgICAgcmVtb3ZlSXRlbUZyb20oZWRnZS5kc3QuaW5FZGdlcywgZWRnZSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlZGdlSWRcclxuICAgICAqL1xyXG4gICAgcmVtb3ZlRWRnZUJ5SWQoZWRnZUlkKSB7XHJcbiAgICAgICAgbGV0IGVkZ2UgPSB0aGlzLmVkZ2VNYXAuZ2V0KGVkZ2VJZClcclxuICAgICAgICBpZiAoIWVkZ2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVtb3ZlRWRnZShlZGdlKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybnMge0dyYXBoPFQsIFU+fVxyXG4gICAgICovXHJcbiAgICBjb3B5KCkge1xyXG4gICAgICAgIGxldCBnID0gbmV3IEdyYXBoKClcclxuICAgICAgICB0aGlzLm5vZGVzLmZvckVhY2gobiA9PiBnLmFkZE5vZGUobi5pZCwgbi5kYXRhKSlcclxuICAgICAgICB0aGlzLmVkZ2VzLmZvckVhY2goZSA9PiBnLmFkZEVkZ2UoZS5zcmMuaWQsIGUuZHN0LmlkKSlcclxuICAgICAgICByZXR1cm4gZ1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBWZXJ0ZXhMYXlvdXQge1xyXG4gICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXHJcbiAgICB4MFxyXG4gICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXHJcbiAgICB4MVxyXG4gICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXHJcbiAgICB5XHJcbiAgICAvKiogQHR5cGUge3N0cmluZ30gKi9cclxuICAgIHZlcnRleE5hbWVcclxuICAgIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi9cclxuICAgIHRvUmVuZGVyXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geDBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4MVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHlcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdG9SZW5kZXJcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2ZXJ0ZXhOYW1lXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHgwLCB4MSwgeSwgdG9SZW5kZXIsIHZlcnRleE5hbWUpIHtcclxuICAgICAgICB0aGlzLngwID0geDBcclxuICAgICAgICB0aGlzLngxID0geDFcclxuICAgICAgICB0aGlzLnkgPSB5XHJcbiAgICAgICAgdGhpcy52ZXJ0ZXhOYW1lID0gdmVydGV4TmFtZVxyXG4gICAgICAgIHRoaXMudG9SZW5kZXIgPSB0b1JlbmRlclxyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBFZGdlTGF5b3V0IHtcclxuICAgIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi9cclxuICAgIGlzSGlkZGVuID0gZmFsc2U7XHJcbiAgICAvKiogQHR5cGUge251bWJlcnxudWxsfSAqL1xyXG4gICAgdHVybmluZ1ggPSBudWxsO1xyXG59XHJcbiIsIi8qKlxyXG4gKiBAdGVtcGxhdGUgSywgVlxyXG4gKlxyXG4gKiBAcGFyYW0ge01hcDxLLCBWPn0gbWFwXHJcbiAqIEBwYXJhbSB7S30ga2V5XHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oSyk6IFZ9IGNvbXB1dGVcclxuICogQHJldHVybnMge1Z9XHJcbiAqL1xyXG5mdW5jdGlvbiBjb21wdXRlSWZBYnNlbnQobWFwLCBrZXksIGNvbXB1dGUpIHtcclxuICAgIGlmIChtYXAuaGFzKGtleSkpIHtcclxuICAgICAgICByZXR1cm4gbWFwLmdldChrZXkpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdmFsdWUgPSBjb21wdXRlKGtleSk7XHJcbiAgICBtYXAuc2V0KGtleSwgdmFsdWUpO1xyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgTWFwVXRpbHMgPSB7XHJcbiAgICBjb21wdXRlSWZBYnNlbnQsXHJcbn1cclxuIiwiaW1wb3J0IHtFZGdlfSBmcm9tIFwiQC9ncmFwaFwiO1xyXG5pbXBvcnQge01hcFV0aWxzfSBmcm9tIFwiQC91dGlscy9NYXBVdGlsc1wiO1xyXG5pbXBvcnQge0FycmF5VXRpbHN9IGZyb20gXCJAL3V0aWxzL0FycmF5VXRpbHNcIjtcclxuXHJcbi8qKlxyXG4gKiBAdHlwZWRlZiB7aW1wb3J0KCdAL2dyYXBoJykuTm9kZTxWZXJ0ZXhMYXlvdXQsIEVkZ2VMYXlvdXQ+fSBUREFHTGF5b3V0QWxnb35Ob2RlXHJcbiAqL1xyXG5cclxuZXhwb3J0IGNsYXNzIFREQUdMYXlvdXRBbGdvIHtcclxuICAgIC8qKiBAdHlwZSB7KG51bWJlciB8IHN0cmluZyl9ICovXHJcbiAgICByb290SWRcclxuICAgIC8qKiBAdHlwZSB7R3JhcGg8VmVydGV4TGF5b3V0LCBFZGdlTGF5b3V0Pn0gKi9cclxuICAgIGdyYXBoXHJcbiAgICAvKiogQHR5cGUge251bWJlcn0gKi9cclxuICAgIGdhcFxyXG5cclxuICAgIC8qKiBAdHlwZSB7U2V0PChudW1iZXJ8c3RyaW5nKT59ICovXHJcbiAgICB2aXNpdGVkU2V0XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0geyhzdHJpbmd8bnVtYmVyKX0gcm9vdElkXHJcbiAgICAgKiBAcGFyYW0ge0dyYXBoPFZlcnRleExheW91dCwgRWRnZUxheW91dD59IGdyYXBoXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZ2FwXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHJvb3RJZCwgZ3JhcGgsIGdhcCkge1xyXG4gICAgICAgIHRoaXMucm9vdElkID0gcm9vdElkXHJcbiAgICAgICAgdGhpcy5ncmFwaCA9IGdyYXBoXHJcbiAgICAgICAgdGhpcy5nYXAgPSBnYXA7XHJcbiAgICB9XHJcblxyXG4gICAgc29sdmUoKSB7XHJcbiAgICAgICAgdGhpcy5jb21wdXRlSGlkZGVuRWRnZVNldCgpO1xyXG4gICAgICAgIHRoaXMucmVvcmRlckluQW5kT3V0RWRnZXMoKTtcclxuICAgICAgICB0aGlzLnNldExpbmVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcHV0ZUhpZGRlbkVkZ2VTZXQoKSB7XHJcbiAgICAgICAgY29uc3QgbXVsdGlPdXROb2RlcyA9IHRoaXMuZ3JhcGgubm9kZXMuZmlsdGVyKG5vZGUgPT4gbm9kZS5vdXRFZGdlcy5sZW5ndGggPiAxKTtcclxuXHJcbiAgICAgICAgdGhpcy5ncmFwaC5lZGdlcy5mb3JFYWNoKGUgPT4gZS5kYXRhLmlzSGlkZGVuID0gZmFsc2UpO1xyXG5cclxuICAgICAgICBtdWx0aU91dE5vZGVzLmZvckVhY2goY3VyTm9kZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRzdE5vZGVzID0gY3VyTm9kZS5vdXRFZGdlcy5tYXAoZSA9PiBlLmRzdCk7XHJcbiAgICAgICAgICAgIC8vIGZpbmQgZHN0IG5vZGUgY2xvc2VzdCB0byBpdFxyXG4gICAgICAgICAgICBsZXQgY2xvc2VzdERzdE5vZGUgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoZHN0Tm9kZXMuZXZlcnkobm9kZSA9PiAhbm9kZS5kYXRhLnRvUmVuZGVyKSkge1xyXG4gICAgICAgICAgICAgICAgLy8ganVzdCBwaWNrIHRoZSBmaXJzdCBvbmVcclxuICAgICAgICAgICAgICAgIGNsb3Nlc3REc3ROb2RlID0gZHN0Tm9kZXNbMF07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBmaW5kIHRoZSBjbG9zZXN0IGRzdCBub2RlXHJcbiAgICAgICAgICAgICAgICBkc3ROb2Rlcy5mb3JFYWNoKGRzdE5vZGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZHN0Tm9kZS5kYXRhLnRvUmVuZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsb3Nlc3REc3ROb2RlID09PSBudWxsIHx8IGNsb3Nlc3REc3ROb2RlLmRhdGEueDAgPiBkc3ROb2RlLmRhdGEueDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VzdERzdE5vZGUgPSBkc3ROb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN1ck5vZGUub3V0RWRnZXMuZm9yRWFjaChlID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlLmRzdCAhPT0gY2xvc2VzdERzdE5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLmRhdGEuaXNIaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW9yZGVySW5BbmRPdXRFZGdlcygpIHtcclxuICAgICAgICBjb25zdCBzdWJUcmVlU3RhcnRNYXAgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy52aXNpdGVkU2V0ID0gbmV3IFNldCgpO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwYXJhbSB7VERBR0xheW91dEFsZ29+Tm9kZX0gbm9kZVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3QgcHJvY2Vzc1N1YlRyZWVTdGFydCA9IChub2RlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnZpc2l0ZWRTZXQuaGFzKG5vZGUuaWQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gSW5maW5pdHk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy52aXNpdGVkU2V0LmFkZChub2RlLmlkKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBzdGFydCA9IG5vZGUuZGF0YS54MCA/PyBJbmZpbml0eTtcclxuICAgICAgICAgICAgbm9kZS5pbkVkZ2VzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGUgPT4gIWUuZGF0YS5pc0hpZGRlbilcclxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkU3RhcnQgPSBwcm9jZXNzU3ViVHJlZVN0YXJ0KGUuc3JjKTtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydCA9IE1hdGgubWluKHN0YXJ0LCBjaGlsZFN0YXJ0KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHN1YlRyZWVTdGFydE1hcC5zZXQobm9kZS5pZCwgc3RhcnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gc3RhcnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByb2Nlc3NTdWJUcmVlU3RhcnQodGhpcy5ncmFwaC5ub2RlTWFwLmdldCh0aGlzLnJvb3RJZCkpO1xyXG5cclxuICAgICAgICB0aGlzLmdyYXBoLm5vZGVzLmZvckVhY2gobm9kZSA9PiB7XHJcbiAgICAgICAgICAgIG5vZGUuaW5FZGdlcy5zb3J0KChlMSwgZTIpID0+XHJcbiAgICAgICAgICAgICAgICBzdWJUcmVlU3RhcnRNYXAuZ2V0KGUxLnNyYy5pZCkgLSBzdWJUcmVlU3RhcnRNYXAuZ2V0KGUyLnNyYy5pZCkpO1xyXG4gICAgICAgICAgICBub2RlLm91dEVkZ2VzLnNvcnQoKGUxLCBlMikgPT5cclxuICAgICAgICAgICAgICAgIHN1YlRyZWVTdGFydE1hcC5nZXQoZTEuc3JjLmlkKSAtIHN1YlRyZWVTdGFydE1hcC5nZXQoZTIuc3JjLmlkKSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBzZXRMaW5lcygpIHtcclxuICAgICAgICB0aGlzLnZpc2l0ZWRTZXQgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgY29uc3Qge2xpbmVNYXB9ID0gdGhpcy5sYXlvdXRWZXJ0ZXgodGhpcy5ncmFwaC5ub2RlTWFwLmdldCh0aGlzLnJvb3RJZCkpO1xyXG4gICAgICAgIGZvciAoY29uc3Qgbm9kZUlkIG9mIGxpbmVNYXAua2V5cygpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBsaW5lTWFwLmdldChub2RlSWQpO1xyXG4gICAgICAgICAgICBjb25zdCBub2RlID0gdGhpcy5ncmFwaC5ub2RlTWFwLmdldChub2RlSWQpO1xyXG4gICAgICAgICAgICBub2RlLmRhdGEueSA9IGxpbmU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGVkZWYge09iamVjdH0gUmVjdXJzaW9uUmV0dXJuT2JqZWN0XHJcbiAgICAgKiBAcHJvcGVydHkge01hcDwobnVtYmVyfHN0cmluZyksIG51bWJlcj59IGxpbmVNYXBcclxuICAgICAqIEBwcm9wZXJ0eSB7TWFwPG51bWJlciwgVERBR0xheW91dEFsZ29+Tm9kZVtdPn0gYmxvY2tzTWFwXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN1YnRyZWUgc3RhcnQgZmlyc3QgKyBzY29yZS1iYXNlZCByb290IHBsYWNlICsgY29tcHJlc3NcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1REQUdMYXlvdXRBbGdvfk5vZGV9IG5vZGVcclxuICAgICAqIEByZXR1cm5zIHtSZWN1cnNpb25SZXR1cm5PYmplY3R9XHJcbiAgICAgKi9cclxuICAgIGxheW91dFZlcnRleChub2RlKSB7XHJcbiAgICAgICAgLyoqIEB0eXBlIHtNYXA8KG51bWJlcnxzdHJpbmcpLCBudW1iZXI+fSAqL1xyXG4gICAgICAgIGNvbnN0IGxvY2FsTGluZU1hcCA9IG5ldyBNYXAoKTtcclxuICAgICAgICAvKiogQHR5cGUge01hcDxudW1iZXIsIFREQUdMYXlvdXRBbGdvfk5vZGVbXT59ICovXHJcbiAgICAgICAgY29uc3QgbG9jYWxCbG9ja3NNYXAgPSBuZXcgTWFwKCk7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7VERBR0xheW91dEFsZ29+Tm9kZVtdfSAqL1xyXG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gbm9kZS5pbkVkZ2VzXHJcbiAgICAgICAgICAgIC5maWx0ZXIoZSA9PiAhZS5kYXRhLmlzSGlkZGVuKVxyXG4gICAgICAgICAgICAubWFwKGUgPT4gZS5zcmMpO1xyXG5cclxuICAgICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlLmRhdGEudG9SZW5kZXIpIHtcclxuICAgICAgICAgICAgICAgIGxvY2FsTGluZU1hcC5zZXQobm9kZS5pZCwgMCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBibG9ja3MgPSBNYXBVdGlscy5jb21wdXRlSWZBYnNlbnQobG9jYWxCbG9ja3NNYXAsIDAsICgpID0+IFtdKTtcclxuICAgICAgICAgICAgICAgIGJsb2Nrcy5wdXNoKG5vZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB7bGluZU1hcDogbG9jYWxMaW5lTWFwLCBibG9ja3NNYXA6IGxvY2FsQmxvY2tzTWFwfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBsYXN0VmFsaWRDaGlsZCA9IG51bGw7XHJcbiAgICAgICAgbGV0IGxhc3RWYWxpZFJlc3VsdE9iamVjdCA9IG51bGw7XHJcblxyXG4gICAgICAgIGxldCBjaGlsZFN0YXJ0TGluZSA9IDA7XHJcbiAgICAgICAgZm9yKGxldCBjaGlsZElkeCA9IDA7IGNoaWxkSWR4IDwgY2hpbGRyZW4ubGVuZ3RoOyArK2NoaWxkSWR4KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5bY2hpbGRJZHhdO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMudmlzaXRlZFNldC5oYXMoY2hpbGQuaWQpKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnZpc2l0ZWRTZXQuYWRkKGNoaWxkLmlkKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGxheW91dCBjaGlsZFxyXG4gICAgICAgICAgICBjb25zdCB7bGluZU1hcDogc3ViTGluZU1hcCwgYmxvY2tzTWFwOiBzdWJCbG9ja3NNYXB9ID0gdGhpcy5sYXlvdXRWZXJ0ZXgoY2hpbGQpO1xyXG4gICAgICAgICAgICBpZiAoc3ViTGluZU1hcC5zaXplID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBzdWJNaW5MaW5lID0gTWF0aC5taW4oLi4uc3ViTGluZU1hcC52YWx1ZXMoKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHN1Yk1heExpbmUgPSBNYXRoLm1heCguLi5zdWJMaW5lTWFwLnZhbHVlcygpKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGNvbXB1dGUgYW5kIG9wdGltaXplIGxpbmUgb2Zmc2V0XHJcbiAgICAgICAgICAgIGxldCBjb21wcmVzc2VkU3RhcnRMaW5lID0gY2hpbGRTdGFydExpbmU7XHJcbiAgICAgICAgICAgIGlmIChsYXN0VmFsaWRDaGlsZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdENoaWxkTGluZSA9IGxvY2FsTGluZU1hcC5nZXQobGFzdFZhbGlkQ2hpbGQuaWQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VyQ2hpbGRMaW5lSW5TdWIgPSBzdWJMaW5lTWFwLmdldChjaGlsZC5pZCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmFsaWRTdGFydExpbmUgPSBjb21wcmVzc2VkU3RhcnRMaW5lOyAgICAgLy8gdGhlIHNtYWxsZXN0IHZhbGlkIGxpbmVcclxuICAgICAgICAgICAgICAgIGxldCB0ZXN0U3RhcnRMaW5lID0gY29tcHJlc3NlZFN0YXJ0TGluZTsgICAgICAvLyB0aGUgY2FuZGlkYXRlIGZvciB0ZXN0XHJcbiAgICAgICAgICAgICAgICBpbmNyZWFzZUxpbmVPZmZzZXQ6XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC0tdGVzdFN0YXJ0TGluZTsgICAgICAgIC8vIHRyeSB0byBtb3ZlIHVwXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ViMkxvY2FsID0gbGluZUluU3ViID0+IGxpbmVJblN1YiAtIHN1Yk1pbkxpbmUgKyB0ZXN0U3RhcnRMaW5lO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsMlN1YiA9IGxpbmVJbkxvY2FsID0+IGxpbmVJbkxvY2FsICsgc3ViTWluTGluZSAtIHRlc3RTdGFydExpbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgd2hldGhlciBsYXN0IGNoaWxkIGlzIGFib3ZlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1YjJMb2NhbChjdXJDaGlsZExpbmVJblN1YikgPD0gbGFzdENoaWxkTGluZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdGVzdExpbmUgPSBzdWIyTG9jYWwoc3ViTWluTGluZSk7IHRlc3RMaW5lIDwgY2hpbGRTdGFydExpbmU7IHRlc3RMaW5lKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvY2tzMCA9IGxvY2FsQmxvY2tzTWFwLmdldCh0ZXN0TGluZSkgPz8gW107ICAgLy8gY2FuJ3QgYmUgbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGlsZHJlbiBibG9ja3MgaGF2ZW4ndCBzZXQgaW50byBsb2NhbCBzY29wZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9ja3MxID0gc3ViQmxvY2tzTWFwLmdldChsb2NhbDJTdWIodGVzdExpbmUpKSA/PyBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBiMCBvZiBibG9ja3MwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGIxIG9mIGJsb2NrczEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc092ZXJsYXBwZWRDb25zaWRlclR1cm5pbmdYKGIwLCBiMSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgaW5jcmVhc2VMaW5lT2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhIHNwZWNpYWwgY2FzZTogYjAgaXMgbGFzdENoaWxkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RWYWxpZENoaWxkID09PSBiMCAmJiBiMS5kYXRhLnR1cm5pbmdYIDwgYjAuZGF0YS54MCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBiMS5kYXRhLnR1cm5pbmdYICE9PSBudWxsLCBhcyBpdCBpcyBhIHByZWN1cnNvciBvZiBjdXIgY2hpbGQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGluY3JlYXNlTGluZU9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRTdGFydExpbmUgPSB0ZXN0U3RhcnRMaW5lO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29tcHJlc3NlZFN0YXJ0TGluZSA9IHZhbGlkU3RhcnRMaW5lO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBtZXJnZSBsaW5lIHJlc3VsdCAqL1xyXG5cclxuICAgICAgICAgICAgLy8gc3ViTGluZUNudCA9IHN1Yk1heExpbmUgLSBzdWJNaW5MaW5lICsgMTtcclxuICAgICAgICAgICAgLy8gbWFwIFtzdWJNaW5MaW5lLCBzdWJNYXhMaW5lXSAtPiBbY29tcHJlc3NlZFN0YXJ0TGluZSwgY29tcHJlc3NlZFN0YXJ0TGluZSArIHN1YkxpbmVDbnQgLSAxXVxyXG4gICAgICAgICAgICBjb25zdCBzdWIyTG9jYWwgPSBsaW5lSW5TdWIgPT4gbGluZUluU3ViIC0gc3ViTWluTGluZSArIGNvbXByZXNzZWRTdGFydExpbmU7XHJcblxyXG4gICAgICAgICAgICAvLyB1cGRhdGUgbG9jYWwgbGluZSBtYXBcclxuICAgICAgICAgICAgZm9yIChjb25zdCBbcHJlY3Vyc29ySWQsIGxpbmVJblN1Yl0gb2Ygc3ViTGluZU1hcC5lbnRyaWVzKCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVJbkxvY2FsID0gc3ViMkxvY2FsKGxpbmVJblN1Yik7XHJcbiAgICAgICAgICAgICAgICBsb2NhbExpbmVNYXAuc2V0KHByZWN1cnNvcklkLCBsaW5lSW5Mb2NhbCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHVwZGF0ZSBsb2NhbCBibG9ja3MgbWFwXHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2xpbmVJblN1Yiwgc3ViQmxvY2tzXSBvZiBzdWJCbG9ja3NNYXAuZW50cmllcygpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lSW5Mb2NhbCA9IHN1YjJMb2NhbChsaW5lSW5TdWIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmxvY2tzID0gTWFwVXRpbHMuY29tcHV0ZUlmQWJzZW50KGxvY2FsQmxvY2tzTWFwLCBsaW5lSW5Mb2NhbCwgKCkgPT4gW10pO1xyXG4gICAgICAgICAgICAgICAgYmxvY2tzLnB1c2goLi4uc3ViQmxvY2tzKTtcclxuICAgICAgICAgICAgICAgIC8vIGJsb2Nrcy5zb3J0KChiMCwgYjEpID0+IGIwLmRhdGEueDAgLSBiMC5kYXRhLngxKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gdXBkYXRlIGNoaWxkU3RhcnRMaW5lXHJcbiAgICAgICAgICAgIGNoaWxkU3RhcnRMaW5lID0gc3ViMkxvY2FsKHN1Yk1heExpbmUpICsgMTtcclxuXHJcbiAgICAgICAgICAgIGxhc3RWYWxpZENoaWxkID0gY2hpbGQ7XHJcbiAgICAgICAgICAgIGxhc3RWYWxpZFJlc3VsdE9iamVjdCA9IHtsaW5lTWFwOiBzdWJMaW5lTWFwLCBibG9ja3NNYXA6IHN1YkJsb2Nrc01hcH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBmaW5kIGEgbGluZSBmb3IgY3VycmVudCBub2RlICovXHJcblxyXG4gICAgICAgIGlmIChub2RlLmRhdGEudG9SZW5kZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgbWF4TGluZSA9IE1hdGgubWF4KC4uLmxvY2FsTGluZU1hcC52YWx1ZXMoKSk7XHJcbiAgICAgICAgICAgIGxldCBtaW5TY29yZSA9IEluZmluaXR5O1xyXG4gICAgICAgICAgICBsZXQgYmVzdExpbmUgPSAtMjtcclxuXHJcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7VERBR0xheW91dEFsZ29+Tm9kZVtdW10gfCBudWxsfSAqL1xyXG4gICAgICAgICAgICBsZXQgYmVzdEdyb3VwcyA9IG51bGw7XHJcbiAgICAgICAgICAgIGZvcihsZXQgdGVzdExpbmUgPSAtMTsgdGVzdExpbmUgPD0gbWF4TGluZSArIDE7ICsrdGVzdExpbmUpIHsgICAgICAvLyBpIGlzIGxpbmVJZHggYXMgd2VsbFxyXG4gICAgICAgICAgICAgICAgLy8gY29uc3QgYmxvY2tzID0gTWFwVXRpbHMuY29tcHV0ZUlmQWJzZW50KGxvY2FsQmxvY2tzTWFwLCB0ZXN0TGluZSwgKCkgPT4gW10pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmxvY2tzID0gbG9jYWxCbG9ja3NNYXAuZ2V0KHRlc3RMaW5lKSA/PyBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzVmFsaWQgPSBibG9ja3MuZXZlcnkodGVzdE5vZGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhdGhpcy5pc092ZXJsYXBwZWQodGVzdE5vZGUsIG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBjb21wdXRlIHNjb3JlXHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZ3JvdXBzID0gdGhpcy5jb21wdXRlQ2hpbGRyZW5Hcm91cHMobG9jYWxMaW5lTWFwLCBub2RlLCBjaGlsZHJlbiwgdGVzdExpbmUpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvc3QgPSAwO1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBzLmZvckVhY2goKGdyb3VwLCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdyb3VwLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXhFbmQgPSBNYXRoLm1heCguLi5ncm91cC5tYXAoY2hpbGQgPT4gY2hpbGQuZGF0YS54MSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBncm91cC5mb3JFYWNoKGNoaWxkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29zdCArPSB0aGlzLmNvbXB1dGVFZGdlQ29zdChjaGlsZC5kYXRhLngxLCBsb2NhbExpbmVNYXAuZ2V0KGNoaWxkLmlkKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEVuZCArIHRoaXMuZ2FwLCB0ZXN0TGluZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IDEpIHsgICAgICAvLyBtaWRkbGUgcGFydFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3N0ICs9IHRoaXMuY29tcHV0ZUVkZ2VDb3N0KG1heEVuZCwgdGVzdExpbmUsIG5vZGUuZGF0YS54MCwgdGVzdExpbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGRDZW50ZXJZID0gY2hpbGRyZW4ucmVkdWNlKChzdW0sIGNoaWxkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1bSArIGxvY2FsTGluZU1hcC5nZXQoY2hpbGQuaWQpO1xyXG4gICAgICAgICAgICAgICAgfSwgMCkgLyBjaGlsZHJlbi5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBjb3N0ICs9IE1hdGguYWJzKGNoaWxkQ2VudGVyWSAtIHRlc3RMaW5lKSAqIGNoaWxkcmVuLmxlbmd0aCAqIENISUxEX0NFTlRFUl9ZX0RJU1RfUEVOQUxUWTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZ3JvdXBzWzBdLmxlbmd0aCAhPT0gMFxyXG4gICAgICAgICAgICAgICAgICAgICYmIE1hdGgubWluKC4uLmdyb3Vwc1swXS5tYXAoY2hpbGQgPT4gY2hpbGQuZGF0YS54MCkpID4gbm9kZS5kYXRhLngwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29zdCArPSBJbmZpbml0eTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY29zdCA8IG1pblNjb3JlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluU2NvcmUgPSBjb3N0O1xyXG4gICAgICAgICAgICAgICAgICAgIGJlc3RMaW5lID0gdGVzdExpbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgYmVzdEdyb3VwcyA9IGdyb3VwcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYmVzdExpbmUgPT09IC0yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdsYXlvdXQgZXJyb3InLCB0aGlzLCBub2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYmVzdExpbmUgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBiZXN0TGluZSA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtwcmVjdXJzb3JJZCwgbGluZV0gb2YgbG9jYWxMaW5lTWFwLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsTGluZU1hcC5zZXQocHJlY3Vyc29ySWQsIGxpbmUgKyAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBNYXAgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgICAgICAgICBsb2NhbEJsb2Nrc01hcC5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB0ZW1wTWFwLnNldChrZXksIHZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICBsb2NhbEJsb2Nrc01hcC5jbGVhcigpO1xyXG4gICAgICAgICAgICAgICAgdGVtcE1hcC5mb3JFYWNoKChibG9ja3MsIGxpbmUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbEJsb2Nrc01hcC5zZXQobGluZSArIDEsIGJsb2Nrcyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2xhc3QgY2hvaWNlJywgYmVzdExpbmUpO1xyXG4gICAgICAgICAgICBsb2NhbExpbmVNYXAuc2V0KG5vZGUuaWQsIGJlc3RMaW5lKTtcclxuICAgICAgICAgICAgTWFwVXRpbHMuY29tcHV0ZUlmQWJzZW50KGxvY2FsQmxvY2tzTWFwLCBiZXN0TGluZSwgKCkgPT4gW10pLnB1c2gobm9kZSk7XHJcblxyXG4gICAgICAgICAgICAvKiBzZXQgZWRnZSB0dXJuaW5nIHBvaW50ICovXHJcblxyXG4gICAgICAgICAgICBiZXN0R3JvdXBzLmZvckVhY2goKGdyb3VwLCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdHVybmluZ1g7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXhFbmQgPSBNYXRoLm1heCguLi5ncm91cC5tYXAoY2hpbGQgPT4gY2hpbGQuZGF0YS54MSkpO1xyXG4gICAgICAgICAgICAgICAgdHVybmluZ1ggPSBNYXRoLm1pbihtYXhFbmQgKyB0aGlzLmdhcCAvIDIsIG5vZGUuZGF0YS54MSk7XHJcbiAgICAgICAgICAgICAgICBncm91cC5mb3JFYWNoKGNoaWxkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlZGdlID0gdGhpcy5ncmFwaC5lZGdlTWFwLmdldChFZGdlLmdldEVkZ2VJZChjaGlsZCwgbm9kZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZWRnZS5kYXRhLmlzSGlkZGVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiZXN0TGluZSA9PT0gbG9jYWxMaW5lTWFwLmdldChjaGlsZC5pZCkpIHsgICAgICAvLyBvbiB0aGUgc2FtZSBsaW5lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGdlLmRhdGEudHVybmluZ1ggPSBub2RlLmRhdGEueDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA9PT0gMSkgeyAgICAgICAvLyBtaWRkbGUgZ3JvdXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhc2ljIHNvbHV0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlZGdlLmRhdGEudHVybmluZ1ggPSBub2RlLmRhdGEueDAgLSB0aGlzLmdhcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhc2ljIHNvbHV0aW9uIDJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVkZ2UuZGF0YS50dXJuaW5nWCA9ICh0dXJuaW5nWCArIG5vZGUuZGF0YS54MCkgLyAyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9wdGltaXplZCBzb2x1dGlvbiAoc2xvdylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7VERBR0xheW91dEFsZ29+Tm9kZVtdfSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdE5vZGVzSW5FYWNoTGluZSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBsb2NhbExpbmVNYXAuZ2V0KGNoaWxkLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGxpbmUgPSBNYXRoLm1pbihzdGFydCwgYmVzdExpbmUpOyBsaW5lIDw9IE1hdGgubWF4KHN0YXJ0LGJlc3RMaW5lKTsgKytsaW5lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZXNPblRoZUxlZnQgPSBsb2NhbEJsb2Nrc01hcC5nZXQobGluZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihiID0+IGIuZGF0YS54MCA8IG5vZGUuZGF0YS54MCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdE5vZGUgPSBBcnJheVV0aWxzLmZpbmRNYXgobm9kZXNPblRoZUxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwLCBxKSA9PiBwLmRhdGEueDAgLSBxLmRhdGEueDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXN0Tm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0Tm9kZXNJbkVhY2hMaW5lLnB1c2gobGFzdE5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbmRQb2ludCA9IG1heEVuZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG5vZGUuZGF0YS52ZXJ0ZXhOYW1lLCBsYXN0Tm9kZXNJbkVhY2hMaW5lLCBsb2NhbExpbmVNYXAuZ2V0KGNoaWxkLmlkKSwgYmVzdExpbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3ROb2Rlc0luRWFjaExpbmUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyW119ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kUG9pbnRzID0gbGFzdE5vZGVzSW5FYWNoTGluZS5tYXAocHJlY3Vyc29yID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWRnZSA9IHByZWN1cnNvci5vdXRFZGdlcy5maW5kKGUgPT4gIWUuZGF0YS5pc0hpZGRlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlZGdlLmRhdGEudHVybmluZ1ggJiYgZWRnZS5kc3QgIT09IG5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlZGdlLmRhdGEudHVybmluZ1g7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJlY3Vyc29yLmRhdGEueDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRQb2ludCA9IE1hdGgubWF4KC4uLmVuZFBvaW50cykgKyB0aGlzLmdhcCAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGdlLmRhdGEudHVybmluZ1ggPSAoZW5kUG9pbnQgKyBub2RlLmRhdGEueDApIC8gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2UuZGF0YS50dXJuaW5nWCA9IHR1cm5pbmdYO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBub3QgdG8gcmVuZGVyIHRoaXMgbm9kZVxyXG4gICAgICAgICAgICBsZXQgbm9kZVdpdGhNYXhFbmQgPSBudWxsO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHByZWN1cnNvcklkIG9mIGxvY2FsTGluZU1hcC5rZXlzKCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByZWN1cnNvciA9IHRoaXMuZ3JhcGgubm9kZU1hcC5nZXQocHJlY3Vyc29ySWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5vZGVXaXRoTWF4RW5kID09PSBudWxsIHx8IHByZWN1cnNvci5kYXRhLngxID4gbm9kZVdpdGhNYXhFbmQuZGF0YS54MSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGVXaXRoTWF4RW5kID0gcHJlY3Vyc29yO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChub2RlV2l0aE1heEVuZCAhPT0gbnVsbCkgeyAgICAgIC8vIGxvY2FsTGluZU1hcC5zaXplICE9PSAwXHJcbiAgICAgICAgICAgICAgICBub2RlLmRhdGEueDAgPSBub2RlLmRhdGEueDEgPSBub2RlV2l0aE1heEVuZC5kYXRhLngxO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGluZSA9IGxvY2FsTGluZU1hcC5nZXQobm9kZVdpdGhNYXhFbmQuaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdsYXN0IGNob2ljZScsIGJlc3RMaW5lKTtcclxuICAgICAgICAgICAgICAgIGxvY2FsTGluZU1hcC5zZXQobm9kZS5pZCwgbGluZSk7XHJcbiAgICAgICAgICAgICAgICBNYXBVdGlscy5jb21wdXRlSWZBYnNlbnQobG9jYWxCbG9ja3NNYXAsIGxpbmUsICgpID0+IFtdKS5wdXNoKG5vZGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIHNldCBlZGdlIHR1cm5pbmcgcG9pbnQgKi9cclxuICAgICAgICAgICAgICAgIGNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVkZ2UgPSB0aGlzLmdyYXBoLmVkZ2VNYXAuZ2V0KEVkZ2UuZ2V0RWRnZUlkKGNoaWxkLCBub2RlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWRnZS5kYXRhLnR1cm5pbmdYID0gbm9kZS5kYXRhLngwO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7bGluZU1hcDogbG9jYWxMaW5lTWFwLCBibG9ja3NNYXA6IGxvY2FsQmxvY2tzTWFwfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7VERBR0xheW91dEFsZ29+Tm9kZX0gbm9kZTBcclxuICAgICAqIEBwYXJhbSB7VERBR0xheW91dEFsZ29+Tm9kZX0gbm9kZTFcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBpc092ZXJsYXBwZWQobm9kZTAsIG5vZGUxKSB7XHJcbiAgICAgICAgY29uc3Qgc3RhcnQwID0gbm9kZTAuZGF0YS54MCwgZW5kMCA9IG5vZGUwLmRhdGEueDEgKyB0aGlzLmdhcDtcclxuICAgICAgICBjb25zdCBzdGFydDEgPSBub2RlMS5kYXRhLngwLCBlbmQxID0gbm9kZTEuZGF0YS54MSArIHRoaXMuZ2FwO1xyXG4gICAgICAgIHJldHVybiAhKGVuZDAgPCBzdGFydDEgfHwgc3RhcnQwID4gZW5kMSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge1REQUdMYXlvdXRBbGdvfk5vZGV9IG5vZGUwXHJcbiAgICAgKiBAcGFyYW0ge1REQUdMYXlvdXRBbGdvfk5vZGV9IG5vZGUxXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgaXNPdmVybGFwcGVkQ29uc2lkZXJUdXJuaW5nWChub2RlMCwgbm9kZTEpIHtcclxuICAgICAgICBsZXQgc3RhcnQwID0gbm9kZTAuZGF0YS54MCwgZW5kMCA9IG5vZGUwLmRhdGEueDEgKyB0aGlzLmdhcDtcclxuICAgICAgICBsZXQgc3RhcnQxID0gbm9kZTEuZGF0YS54MCwgZW5kMSA9IG5vZGUxLmRhdGEueDEgKyB0aGlzLmdhcDtcclxuICAgICAgICBub2RlMC5vdXRFZGdlcy5mb3JFYWNoKGUgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS5kYXRhLnR1cm5pbmdYICYmIGVuZDAgPCBlLmRhdGEudHVybmluZ1gpIHtcclxuICAgICAgICAgICAgICAgIGVuZDAgPSBlLmRhdGEudHVybmluZ1g7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBub2RlMS5vdXRFZGdlcy5mb3JFYWNoKGUgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS5kYXRhLnR1cm5pbmdYICYmIGVuZDEgPCBlLmRhdGEudHVybmluZ1gpIHtcclxuICAgICAgICAgICAgICAgIGVuZDEgPSBlLmRhdGEudHVybmluZ1g7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gIShlbmQwIDwgc3RhcnQxIHx8IHN0YXJ0MCA+IGVuZDEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtNYXA8bnVtYmVyfHN0cmluZywgbnVtYmVyPn0gbGluZU1hcFxyXG4gICAgICogQHBhcmFtIHtUREFHTGF5b3V0QWxnb35Ob2RlfSBub2RlXHJcbiAgICAgKiBAcGFyYW0ge1REQUdMYXlvdXRBbGdvfk5vZGVbXX0gY2hpbGRyZW5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvcHRpb25hbExpbmUgTm9kZSBjYW4gYmUgcHV0IGhlcmVcclxuICAgICAqIEByZXR1cm5zIHtUREFHTGF5b3V0QWxnb35Ob2RlW11bXX1cclxuICAgICAqL1xyXG4gICAgY29tcHV0ZUNoaWxkcmVuR3JvdXBzKGxpbmVNYXAsIG5vZGUsIGNoaWxkcmVuLCBvcHRpb25hbExpbmUpIHtcclxuICAgICAgICBjb25zdCBvdmVybGFwcGVkQ2hpbGRyZW4gPSBjaGlsZHJlbi5maWx0ZXIoY2hpbGQgPT4gdGhpcy5pc092ZXJsYXBwZWQobm9kZSwgY2hpbGQpKTtcclxuXHJcbiAgICAgICAgLy8gZmluZCBsYXN0IG92ZXJsYXBwZWQgY2hpbGQgYWJvdmUgb3B0aW9uYWwgbGluZVxyXG4gICAgICAgIGNvbnN0IG92ZXJsYXBwZWRDaGlsZHJlbkFib3ZlID0gb3ZlcmxhcHBlZENoaWxkcmVuLmZpbHRlcihjaGlsZCA9PiBsaW5lTWFwLmdldChjaGlsZC5pZCkgPCBvcHRpb25hbExpbmUpO1xyXG4gICAgICAgIGNvbnN0IGxhc3RPdmVybGFwcGVkQWJvdmUgPSBvdmVybGFwcGVkQ2hpbGRyZW5BYm92ZVtvdmVybGFwcGVkQ2hpbGRyZW5BYm92ZS5sZW5ndGggLSAxXSA/PyBudWxsO1xyXG5cclxuICAgICAgICAvLyBmaW5kIGZpcnN0IG92ZXJsYXBwZWQgY2hpbGQgYmVsb3cgb3B0aW9uYWwgbGluZVxyXG4gICAgICAgIGNvbnN0IG92ZXJsYXBwZWRDaGlsZHJlbkJlbG93ID0gb3ZlcmxhcHBlZENoaWxkcmVuLmZpbHRlcihjaGlsZCA9PiBsaW5lTWFwLmdldChjaGlsZC5pZCkgPiBvcHRpb25hbExpbmUpO1xyXG4gICAgICAgIGNvbnN0IGZpcnN0T3ZlcmxhcHBlZEJlbG93ID0gb3ZlcmxhcHBlZENoaWxkcmVuQmVsb3dbMF0gPz8gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gWzAsc2VnSW5kZXgwKSwgW3NlZ0luZGV4MCxzZWdJbmRleDEpLCBbc2VnSW5kZXgxLGxlbilcclxuICAgICAgICBsZXQgc2VnSW5kZXgwID0gMCwgc2VnSW5kZXgxID0gY2hpbGRyZW4ubGVuZ3RoO1xyXG4gICAgICAgIGlmIChsYXN0T3ZlcmxhcHBlZEFib3ZlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHNlZ0luZGV4MCA9IGNoaWxkcmVuLmluZGV4T2YobGFzdE92ZXJsYXBwZWRBYm92ZSkgKyAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZmlyc3RPdmVybGFwcGVkQmVsb3cgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgc2VnSW5kZXgxID0gY2hpbGRyZW4uaW5kZXhPZihmaXJzdE92ZXJsYXBwZWRCZWxvdyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGdyb3VwMCA9IGNoaWxkcmVuLmZpbHRlcigoXywgaSkgPT4gaSA8IHNlZ0luZGV4MCk7XHJcbiAgICAgICAgY29uc3QgZ3JvdXAxID0gY2hpbGRyZW4uZmlsdGVyKChfLCBpKSA9PiBzZWdJbmRleDAgPD0gaSAmJiBpIDwgc2VnSW5kZXgxKTtcclxuICAgICAgICBjb25zdCBncm91cDIgPSBjaGlsZHJlbi5maWx0ZXIoKF8sIGkpID0+IHNlZ0luZGV4MSA8PSBpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIFtncm91cDAsIGdyb3VwMSwgZ3JvdXAyXTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wdXRlRWRnZUNvc3Qoc3JjWCwgc3JjWSwgZHN0WCwgZHN0WSkge1xyXG4gICAgICAgIGxldCBjb3N0ID0gMDtcclxuICAgICAgICBjb3N0ICs9IE1hdGguYWJzKHNyY1ggLSBkc3RYKSAvIHRoaXMuZ2FwICogWF9GQUNUT1I7XHJcbiAgICAgICAgY29zdCArPSBNYXRoLmFicyhzcmNZIC0gZHN0WSkgKiAoWV9GQUNUT1IgKyBZX1VQX1BFTkFMVFkgKiAoc3JjWSA8PSBkc3RZID8gMCA6IDEpKTtcclxuICAgICAgICByZXR1cm4gY29zdDtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgWF9GQUNUT1IgPSAxO1xyXG5jb25zdCBZX0ZBQ1RPUiA9IDE7XHJcbmNvbnN0IFlfVVBfUEVOQUxUWSA9IDAuMDU7XHJcbmNvbnN0IENISUxEX0NFTlRFUl9ZX0RJU1RfUEVOQUxUWSA9IDAuMDQ7XHJcbi8vIGNvbnN0IENISUxEX0NFTlRFUl9ZX0RJU1RfUEVOQUxUWSA9IDA7XHJcbiIsImltcG9ydCB7RWRnZSwgR3JhcGh9IGZyb20gXCJAL2dyYXBoXCI7XHJcbmltcG9ydCB7VmVydGV4TGF5b3V0fSBmcm9tIFwiQC9hbGdvL1ZlcnRleExheW91dERhdGFcIjtcclxuaW1wb3J0IHtFZGdlTGF5b3V0fSBmcm9tIFwiQC9hbGdvL0VkZ2VMYXlvdXREYXRhXCI7XHJcbmltcG9ydCB7VERBR0xheW91dEFsZ299IGZyb20gXCJAL2FsZ28vVERBR0xheW91dEFsZ29cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUZGFnIHtcclxuXHJcbiAgICAvKiogQHR5cGUge0dyYXBoPFZlcnRleExheW91dCwgRWRnZUxheW91dD59ICovXHJcbiAgICBfZ3JhcGg7XHJcblxyXG4gICAgLyogc2V0dGluZ3MgKi9cclxuXHJcbiAgICAvKiogQHR5cGUge251bWJlcn0gKi9cclxuICAgIF9nYXAgPSAyMDtcclxuICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xyXG4gICAgX2xpbmVIZWlnaHQgPSAxMDtcclxuICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xyXG4gICAgX2xpbmVTcGFjZSA9IDQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5fZ3JhcGggPSBuZXcgR3JhcGgoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7KG51bWJlciB8IHN0cmluZyl9IGlkXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geDBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4MVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSByZW5kZXJcclxuICAgICAqL1xyXG4gICAgc2V0Tm9kZSh7aWQsIHgwLCB4MSwgcmVuZGVyPWZhbHNlfSkge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVmVydGV4TGF5b3V0KHgwLCB4MSwgMCwgcmVuZGVyLCAnbm9kZS0nICsgaWQpO1xyXG4gICAgICAgIHRoaXMuX2dyYXBoLmFkZE5vZGUoaWQsIGRhdGEpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7KG51bWJlciB8IHN0cmluZyl9IHNyY1xyXG4gICAgICogQHBhcmFtIHsobnVtYmVyIHwgc3RyaW5nKX0gZHN0XHJcbiAgICAgKi9cclxuICAgIHNldEVkZ2Uoe3NyYywgZHN0fSkge1xyXG4gICAgICAgIGlmICghdGhpcy5fZ3JhcGgubm9kZU1hcC5oYXMoc3JjKSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCd0ZGFnbGE6IENhblxcJ3QgZmluZCBub2RlICcgKyBzcmMgKyAnLiBJZ25vcmVkLicpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLl9ncmFwaC5ub2RlTWFwLmhhcyhkc3QpKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3RkYWdsYTogQ2FuXFwndCBmaW5kIG5vZGUgJyArIGRzdCArICcuIElnbm9yZWQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBkYXRhID0gbmV3IEVkZ2VMYXlvdXQoKVxyXG4gICAgICAgIHRoaXMuX2dyYXBoLmFkZEVkZ2Uoc3JjLCBkc3QsIGRhdGEpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBpZFxyXG4gICAgICogQHJldHVybnMge251bGx8VmVydGV4TGF5b3V0fVxyXG4gICAgICovXHJcbiAgICBnZXROb2RlKGlkKSB7XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMuX2dyYXBoLm5vZGVNYXAuZ2V0KGlkKTtcclxuICAgICAgICBpZiAoIW5vZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBub2RlLmRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHsobnVtYmVyIHwgc3RyaW5nKX0gc3JjXHJcbiAgICAgKiBAcGFyYW0geyhudW1iZXIgfCBzdHJpbmcpfSBkc3RcclxuICAgICAqIEByZXR1cm5zIHtudWxsIHwgRWRnZUxheW91dH1cclxuICAgICAqL1xyXG4gICAgZ2V0RWRnZShzcmMsIGRzdCkge1xyXG4gICAgICAgIGNvbnN0IHNyY05vZGUgPSB0aGlzLl9ncmFwaC5ub2RlTWFwLmdldChzcmMpO1xyXG4gICAgICAgIGNvbnN0IGRzdE5vZGUgPSB0aGlzLl9ncmFwaC5ub2RlTWFwLmdldChkc3QpO1xyXG4gICAgICAgIGlmICghc3JjTm9kZSB8fCAhZHN0Tm9kZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZWRnZSA9IHRoaXMuX2dyYXBoLmVkZ2VNYXAuZ2V0KEVkZ2UuZ2V0RWRnZUlkKHNyY05vZGUsIGRzdE5vZGUpKTtcclxuICAgICAgICBpZiAoIWVkZ2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBlZGdlLmRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGdhcFxyXG4gICAgICogQHJldHVybnMge3RoaXN9XHJcbiAgICAgKi9cclxuICAgIHNldEdhcChnYXApIHtcclxuICAgICAgICB0aGlzLl9nYXAgPSBnYXA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBnZXRHYXAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dhcDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsaW5lSGVpZ2h0XHJcbiAgICAgKiBAcmV0dXJucyB7dGhpc31cclxuICAgICAqL1xyXG4gICAgc2V0TGluZUhlaWdodChsaW5lSGVpZ2h0KSB7XHJcbiAgICAgICAgdGhpcy5fbGluZUhlaWdodCA9IGxpbmVIZWlnaHQ7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBnZXRMaW5lSGVpZ2h0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9saW5lSGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxpbmVTcGFjZVxyXG4gICAgICogQHJldHVybnMge3RoaXN9XHJcbiAgICAgKi9cclxuICAgIHNldExpbmVTcGFjZShsaW5lU3BhY2UpIHtcclxuICAgICAgICB0aGlzLl9saW5lU3BhY2UgPSBsaW5lU3BhY2U7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBnZXRMaW5lU3BhY2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xpbmVTcGFjZTtcclxuICAgIH1cclxuXHJcbiAgICBsYXlvdXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2dyYXBoLm5vZGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGZpbmQgcm9vdFxyXG4gICAgICAgIGxldCByb290ID0gdGhpcy5fZ3JhcGgubm9kZXNbMF07XHJcbiAgICAgICAgd2hpbGUgKHJvb3Qub3V0RWRnZXMubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHJvb3QgPSByb290Lm91dEVkZ2VzWzBdLmRzdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHJ1biBsYXlvdXQgYWxnb1xyXG4gICAgICAgIGxldCB0cmVlTGF5b3V0QWxnbyA9IG5ldyBUREFHTGF5b3V0QWxnbyhyb290LmlkLCB0aGlzLl9ncmFwaCwgdGhpcy5fZ2FwKTtcclxuICAgICAgICB0cmVlTGF5b3V0QWxnby5zb2x2ZSgpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7VGRhZ30gZnJvbSBcIkAvYWxnby9UZGFnXCI7XHJcblxyXG5mdW5jdGlvbiBjcmVhdGUoKSB7XHJcbiAgICByZXR1cm4gbmV3IFRkYWcoKTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHRkYWdsYSA9IHtcclxuICAgIGNyZWF0ZSxcclxufVxyXG4iXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsIl9fd2VicGFja19yZXF1aXJlX18iLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwiRWRnZSIsImlkIiwiZGF0YSIsInNyYyIsImRzdCIsImNvbnN0cnVjdG9yIiwidGhpcyIsImdldEVkZ2VJZCIsInN0YXRpYyIsInJlbW92ZUl0ZW1Gcm9tIiwiYXJyYXkiLCJpdGVtIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiQXJyYXlVdGlscyIsImNvbXBhcmF0b3IiLCJtYXhJdGVtIiwiZm9yRWFjaCIsIk5vZGUiLCJvdXRFZGdlcyIsImluRWRnZXMiLCJHcmFwaCIsIm5vZGVzIiwibm9kZU1hcCIsIk1hcCIsImVkZ2VzIiwiZWRnZU1hcCIsImFkZE5vZGUiLCJub2RlIiwicHVzaCIsInNldCIsInJlbW92ZU5vZGUiLCJoYXMiLCJkZWxldGUiLCJjb25jYXQiLCJlIiwicmVtb3ZlRWRnZSIsInJlbW92ZU5vZGVCeUlkIiwiYWRkRWRnZSIsInNyY0lkIiwiZHN0SWQiLCJ1bmRlZmluZWQiLCJlZGdlIiwicmVtb3ZlRWRnZUJ5SWQiLCJlZGdlSWQiLCJjb3B5IiwiZyIsIm4iLCJWZXJ0ZXhMYXlvdXQiLCJ4MCIsIngxIiwieSIsInZlcnRleE5hbWUiLCJ0b1JlbmRlciIsIkVkZ2VMYXlvdXQiLCJpc0hpZGRlbiIsInR1cm5pbmdYIiwiTWFwVXRpbHMiLCJtYXAiLCJjb21wdXRlIiwiVERBR0xheW91dEFsZ28iLCJyb290SWQiLCJncmFwaCIsImdhcCIsInZpc2l0ZWRTZXQiLCJzb2x2ZSIsImNvbXB1dGVIaWRkZW5FZGdlU2V0IiwicmVvcmRlckluQW5kT3V0RWRnZXMiLCJzZXRMaW5lcyIsIm11bHRpT3V0Tm9kZXMiLCJmaWx0ZXIiLCJsZW5ndGgiLCJjdXJOb2RlIiwiZHN0Tm9kZXMiLCJjbG9zZXN0RHN0Tm9kZSIsImV2ZXJ5IiwiZHN0Tm9kZSIsInN1YlRyZWVTdGFydE1hcCIsIlNldCIsInByb2Nlc3NTdWJUcmVlU3RhcnQiLCJJbmZpbml0eSIsImFkZCIsInN0YXJ0IiwiY2hpbGRTdGFydCIsIk1hdGgiLCJtaW4iLCJzb3J0IiwiZTEiLCJlMiIsImxpbmVNYXAiLCJsYXlvdXRWZXJ0ZXgiLCJub2RlSWQiLCJrZXlzIiwibGluZSIsImxvY2FsTGluZU1hcCIsImxvY2FsQmxvY2tzTWFwIiwiY2hpbGRyZW4iLCJibG9ja3NNYXAiLCJsYXN0VmFsaWRDaGlsZCIsImxhc3RWYWxpZFJlc3VsdE9iamVjdCIsImNoaWxkU3RhcnRMaW5lIiwiY2hpbGRJZHgiLCJjaGlsZCIsInN1YkxpbmVNYXAiLCJzdWJCbG9ja3NNYXAiLCJzaXplIiwic3ViTWluTGluZSIsInZhbHVlcyIsInN1Yk1heExpbmUiLCJtYXgiLCJjb21wcmVzc2VkU3RhcnRMaW5lIiwibGFzdENoaWxkTGluZSIsImN1ckNoaWxkTGluZUluU3ViIiwidmFsaWRTdGFydExpbmUiLCJ0ZXN0U3RhcnRMaW5lIiwiaW5jcmVhc2VMaW5lT2Zmc2V0Iiwic3ViMkxvY2FsIiwibGluZUluU3ViIiwibG9jYWwyU3ViIiwibGluZUluTG9jYWwiLCJ0ZXN0TGluZSIsImJsb2NrczAiLCJibG9ja3MxIiwiYjAiLCJiMSIsImlzT3ZlcmxhcHBlZENvbnNpZGVyVHVybmluZ1giLCJwcmVjdXJzb3JJZCIsImVudHJpZXMiLCJzdWJCbG9ja3MiLCJtYXhMaW5lIiwibWluU2NvcmUiLCJiZXN0TGluZSIsImJlc3RHcm91cHMiLCJ0ZXN0Tm9kZSIsImlzT3ZlcmxhcHBlZCIsImdyb3VwcyIsImNvbXB1dGVDaGlsZHJlbkdyb3VwcyIsImNvc3QiLCJncm91cCIsImkiLCJtYXhFbmQiLCJjb21wdXRlRWRnZUNvc3QiLCJjaGlsZENlbnRlclkiLCJyZWR1Y2UiLCJzdW0iLCJhYnMiLCJDSElMRF9DRU5URVJfWV9ESVNUX1BFTkFMVFkiLCJjb25zb2xlIiwiZXJyb3IiLCJ0ZW1wTWFwIiwiY2xlYXIiLCJibG9ja3MiLCJsYXN0Tm9kZXNJbkVhY2hMaW5lIiwibm9kZXNPblRoZUxlZnQiLCJiIiwibGFzdE5vZGUiLCJwIiwicSIsImVuZFBvaW50IiwiZW5kUG9pbnRzIiwicHJlY3Vyc29yIiwiZmluZCIsIm5vZGVXaXRoTWF4RW5kIiwibm9kZTAiLCJub2RlMSIsInN0YXJ0MCIsImVuZDAiLCJzdGFydDEiLCJlbmQxIiwib3B0aW9uYWxMaW5lIiwib3ZlcmxhcHBlZENoaWxkcmVuIiwib3ZlcmxhcHBlZENoaWxkcmVuQWJvdmUiLCJsYXN0T3ZlcmxhcHBlZEFib3ZlIiwiZmlyc3RPdmVybGFwcGVkQmVsb3ciLCJzZWdJbmRleDAiLCJzZWdJbmRleDEiLCJfIiwic3JjWCIsInNyY1kiLCJkc3RYIiwiZHN0WSIsIlhfRkFDVE9SIiwiWV9GQUNUT1IiLCJZX1VQX1BFTkFMVFkiLCJUZGFnIiwiX2dyYXBoIiwiX2dhcCIsIl9saW5lSGVpZ2h0IiwiX2xpbmVTcGFjZSIsInNldE5vZGUiLCJyZW5kZXIiLCJzZXRFZGdlIiwiZ2V0Tm9kZSIsImFzc2lnbiIsImdldEVkZ2UiLCJzcmNOb2RlIiwic2V0R2FwIiwiZ2V0R2FwIiwic2V0TGluZUhlaWdodCIsImxpbmVIZWlnaHQiLCJnZXRMaW5lSGVpZ2h0Iiwic2V0TGluZVNwYWNlIiwibGluZVNwYWNlIiwiZ2V0TGluZVNwYWNlIiwibGF5b3V0IiwidGRhZ2xhIiwiY3JlYXRlIl0sInNvdXJjZVJvb3QiOiIifQ==